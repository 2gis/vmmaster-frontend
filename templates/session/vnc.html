<!--
<script type='text/javascript'
    src='http://getfirebug.com/releases/lite/1.2/firebug-lite-compressed.js'></script>
-->
<script src="/static/js/vnc/util.js"></script>
<script src="/static/js/vnc.js"></script>

<div id="noVNC_screen">
    <div class="play">
        {% if session.endpoint_ip %}
        <a class="text-center glyphicon glyphicon-play" href="javascript: connect('{{ proxy_vnc_host }}')"></a>
        {% else %}
        <a class="text-center glyphicon glyphicon-play" href="#"></a>
        {% endif %}
    </div>
    <canvas id="noVNC_canvas" width="100%" height="auto">
        Canvas not supported.
    </canvas>
    <div id="noVNC_status_bar" class="noVNC_status_bar" style="margin-top: 0;">
        <table border=0 width="100%">
            <tr>
                <td>
                    <div id="noVNC_status" style="position: relative; height: auto;"></div>
                </td>
                <td width="1%">
                    <div id="noVNC_buttons">
                        <span id="noVNC_xvp_buttons"></span>
                    </div>
                </td>
            </tr>
        </table>
    </div>
</div>
<script>
window.onscriptsload = (function () {
    $(document).load("{% url 'proxy_vnc_port' session.id %}", function(response, status, xhr) {
        if (status != "error") {
            port = response;
        }
        $(function() {
            if (port == "") {
                var div = document.getElementById('screencast');
                var err_div = document.createTextNode('Viewing session is not available');
                div.appendChild(err_div);
                $('.play').css({
                    'display': 'none'
                });
            }
        });
    });

});
</script>